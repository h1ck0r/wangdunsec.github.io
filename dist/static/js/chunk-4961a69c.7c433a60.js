(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4961a69c"],{"0cef":function(t,e,a){"use strict";a.d(e,"f",(function(){return s})),a.d(e,"g",(function(){return r})),a.d(e,"o",(function(){return i})),a.d(e,"i",(function(){return o})),a.d(e,"j",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"m",(function(){return u})),a.d(e,"k",(function(){return d})),a.d(e,"n",(function(){return p})),a.d(e,"b",(function(){return m})),a.d(e,"d",(function(){return g})),a.d(e,"p",(function(){return f})),a.d(e,"h",(function(){return h})),a.d(e,"c",(function(){return _})),a.d(e,"e",(function(){return b})),a.d(e,"l",(function(){return v}));var n=a("b775");function s(t){return Object(n["a"])({url:"/layout/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t})}function r(t){return Object(n["a"])({url:"/layout/"+t+"/delete/"})}function i(t){return Object(n["a"])({url:"/img/upload/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t})}function o(t){return Object(n["a"])({url:"/layout/?id="+t,method:"get"})}function l(t){return Object(n["a"])({url:"/layout/"+t+"/release/",method:"get"})}function c(t){return Object(n["a"])({url:"build/compose/",method:"post",data:t})}function u(t){return Object(n["a"])({url:"update/compose/",method:"post",data:t})}function d(){return Object(n["a"])({url:"show/compose/",method:"get"})}function p(t){return Object(n["a"])({url:"/file/upload/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t})}function m(t){return Object(n["a"])({url:"/file/delete/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t})}function g(t){return Object(n["a"])({url:"/download_layout_image/",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/upload_zip_file/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t})}function h(t){return Object(n["a"])({url:"/layout/"+t+"/download/",method:"get",responseType:"blob"})}function _(t){return Object(n["a"])({url:"/download/official/website/layout/",method:"post",data:t})}function b(){return Object(n["a"])({url:"get/official/website/layout",method:"get"})}function v(t,e){return Object(n["a"])({url:"/layout/"+t+"/update_desc/",method:"post",data:e})}},"174f":function(t,e,a){"use strict";a("c02a")},"39ab":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{staticStyle:{"margin-left":"20px"}},[a("el-tab-pane",{attrs:{label:"系统设置"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"30px"},attrs:{"label-width":"170px",model:t.data,"element-loading-text":"修改中"}},[a("el-form-item",{attrs:{label:"分享用户名"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.data.share_username,callback:function(e){t.$set(t.data,"share_username",e)},expression:"data.share_username"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"镜像分享时所需要的贡献用户名，建议设置为Github用户名，方便进行统计贡献。",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Dockerhub 用户名"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.data.username,callback:function(e){t.$set(t.data,"username",e)},expression:"data.username"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"镜像分享时所需的登陆用户名，默认情况下无需修改。",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Dockerhub Token"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.data.pwd,callback:function(e){t.$set(t.data,"pwd",e)},expression:"data.pwd"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"镜像分享时所需的登陆凭证，默认情况下无需修改。",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"镜像过期时间（秒）"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.data.time,callback:function(e){t.$set(t.data,"time",e)},expression:"data.time"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"镜像过期时间，默认为 30 分钟，最小为 1 分钟，0 为永不过期，修改后下次启动镜像开始生效。",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"镜像过期删除"}},[a("el-col",{attrs:{span:20}},[a("el-switch",{model:{value:t.data.del_container,callback:function(e){t.$set(t.data,"del_container",e)},expression:"data.del_container"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"开启之后，镜像到期会自动删除相关容器(默认开启)",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"注册验证"}},[a("el-col",{attrs:{span:20}},[a("el-switch",{model:{value:t.data.cancel_validation,callback:function(e){t.$set(t.data,"cancel_validation",e)},expression:"data.cancel_validation"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"关闭之后，用户注册将关闭邮箱验证(默认开启)",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"用户注册"}},[a("el-col",{attrs:{span:20}},[a("el-switch",{model:{value:t.data.cancel_registration,callback:function(e){t.$set(t.data,"cancel_registration",e)},expression:"data.cancel_registration"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"关闭之后，将无法使用注册功能(默认开启)",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"自动下载镜像"}},[a("el-col",{attrs:{span:20}},[a("el-switch",{model:{value:t.data.is_synchronization,callback:function(e){t.$set(t.data,"is_synchronization",e)},expression:"data.is_synchronization"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"开启之后每隔 1 小时自动下载最新的镜像",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.settingUpdate}},[t._v("修改")]),t._v(" "),a("el-button",[t._v("取消")])],1)],1)],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"网站设置"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.ent_loading,expression:"ent_loading"}],staticStyle:{"margin-top":"30px"},attrs:{"label-width":"170px",model:t.enterpriseData,"element-loading-text":"修改中"}},[a("el-form-item",{attrs:{label:"系统名称"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.enterpriseData.url_name,callback:function(e){t.$set(t.enterpriseData,"url_name",e)},expression:"enterpriseData.url_name"}})],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"自定义系统名称",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"系统LOGO（建议尺寸:289 × 66）"}},[a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:20}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":t.uploadlogo,"show-file-list":!1,"before-upload":t.beforeAvatarUpload}},[t.enterpriseData.enterprise_logo?a("img",{staticClass:"avatar",attrs:{src:t.enterpriseData.enterprise_logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"自定义登录页LOGO（建议尺寸:289 × 66）",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"系统登录背景图（建议尺寸:1920 × 1080）"}},[a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:20}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":t.uploadbg,"show-file-list":!1,"before-upload":t.beforeAvatarUpload2}},[t.enterpriseData.enterprise_bg?a("img",{staticClass:"avatar",attrs:{src:t.enterpriseData.enterprise_bg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-tooltip",{attrs:{content:"自定义系统背景图（建议尺寸:1920 × 1080）",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.settingEnterpriseUpdate}},[t._v("修改")]),t._v(" "),a("el-button",{on:{click:t.resetSetting}},[t._v("重置")])],1)],1)],1)],1)],1)],1)],1)},s=[],r=a("90e7"),i=a("0cef"),o={inject:["reload"],name:"setting",data:function(){return{loading:!1,ent_loading:!1,data:{tabPosition:"left",share_username:"",username:"",pwd:"",time:"1800",is_synchronization:!1,del_container:!0,cancel_validation:!1,cancel_registration:!1},enterpriseData:{url_name:"",enterprise_logo:"",enterprise_bg:""},newLogoFile:new FormData,newBgFile:new FormData,dialogImageUrl:"",dialogVisible:!0,disabled:!0}},created:function(){this.initSetting()},methods:{initSetting:function(){var t=this;Object(r["b"])().then((function(e){var a=e.data;if(200===a.status)t.data=a.data,t.enterpriseData=a.data;else for(var n;n<a.msg.length;n++)t.$message({message:a.msg[n],type:"info"})}))},settingUpdate:function(){var t=this,e=new FormData;e.set("username",this.data.username),e.set("pwd",this.data.pwd),e.set("time",this.data.time),e.set("share_username",this.data.share_username),e.set("is_synchronization",this.data.is_synchronization),e.set("del_container",this.data.del_container),e.set("cancel_validation",this.data.cancel_validation),e.set("cancel_registration",this.data.cancel_registration),this.loading=!0,Object(r["c"])(e).then((function(e){var a=e.data;t.loading=!1,200===a.status?(t.data=a.data,t.$message({message:"修改成功",type:"success"})):t.$message({message:a.msg,type:"error"})}))},settingEnterpriseUpdate:function(){var t=this,e=new FormData;e.set("url_name",this.enterpriseData.url_name),e.set("enterprise_bg",this.enterpriseData.enterprise_bg),e.set("enterprise_logo",this.enterpriseData.enterprise_logo),this.ent_loading=!0,Object(r["a"])(e).then((function(e){var a=e.data;t.ent_loading=!1,200===a.status?(t.data=a.data,t.$message({message:"修改成功",type:"success"})):t.$message({message:a.msg,type:"error"})}))},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return this.newLogoFile=new FormData,e?a?!!t&&void this.newLogoFile.set("img",t):this.$message.error("图片大小不能超过2M"):this.$message.error("只能上传jpg/png图片")},beforeAvatarUpload2:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return this.newBgFile=new FormData,e?a?!!t&&void this.newBgFile.set("img",t):this.$message.error("图片大小不能超过2M"):this.$message.error("只能上传jpg/png图片")},uploadlogo:function(){var t=this,e=this.newLogoFile;e?Object(i["o"])(e).then((function(e){var a=e.data;a.data&&200===a.status?(t.$message({message:"上传成功",type:"success"}),t.enterpriseData.enterprise_logo="/images/"+a.data):t.$message({message:a.msg,type:"error"})})).catch((function(e){t.$message({message:"服务器内部错误",type:"error"})})):this.$message({message:"上传失败",type:"success"})},uploadbg:function(){var t=this,e=this.newBgFile;e?Object(i["o"])(e).then((function(e){var a=e.data;a.data&&200===a.status?(t.$message({message:"上传成功",type:"success"}),t.enterpriseData.enterprise_bg="/images/"+a.data):t.$message({message:a.msg,type:"error"})})).catch((function(e){t.$message({message:"服务器内部错误",type:"error"})})):this.$message({message:"上传失败",type:"success"})},resetSetting:function(){var t=this,e=new FormData;e.set("url_name",""),e.set("enterprise_bg",""),e.set("enterprise_logo",""),this.ent_loading=!0,Object(r["a"])(e).then((function(e){var a=e.data;t.ent_loading=!1,200===a.status?(t.data=a.data,t.$message({message:"重置成功",type:"success"}),t.reload()):t.$message({message:a.msg,type:"error"})}))}}},l=o,c=(a("174f"),a("ec54"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,"2d548ad4",null);e["default"]=u.exports},"90e7":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return o}));var n=a("b775");function s(){return Object(n["a"])({url:"/setting/get",method:"get"})}function r(t){return Object(n["a"])({url:"/setting/update/",method:"post",data:t})}function i(){return Object(n["a"])({url:"get/settingimg",method:"get"})}function o(t){return Object(n["a"])({url:"/enterprise/update/",method:"post",data:t})}},c02a:function(t,e,a){},c02f:function(t,e,a){},ec54:function(t,e,a){"use strict";a("c02f")}}]);
//# sourceMappingURL=chunk-4961a69c.7c433a60.js.map