(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fa92022"],{2957:function(e,t,a){},"4d9d":function(e,t,a){"use strict";a("2957")},"6f71":function(e,t,a){"use strict";a("875b")},"875b":function(e,t,a){},"905e":function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"i",(function(){return o})),a.d(t,"h",(function(){return c})),a.d(t,"j",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"b",(function(){return p}));var r=a("b775");function n(e){return Object(r["a"])({url:"/time/",method:"post",data:e})}function s(){return Object(r["a"])({url:"/time/",method:"delete"})}function i(){return Object(r["a"])({url:"/time/",method:"get"})}function l(e){return Object(r["a"])({url:"/timetemp/",method:"post",data:e})}function o(e){var t="";!0===e&&(t="flag"),"temp"===e&&(t="temp");var a="/timetemp/?query=&flag="+t;return Object(r["a"])({url:a,method:"get"})}function c(e){return Object(r["a"])({url:"/timetemp/"+e+"/",method:"delete",data:{id:e}})}function u(e){return void 0!==e&&null!==e||(e=1),Object(r["a"])({url:"/rank/user/?page="+e,method:"get"})}function d(e){return Object(r["a"])({url:"/time/"+e+"/get/",method:"get"})}function m(e,t){return void 0!==t&&null!==t||(t=1),Object(r["a"])({url:"/timerank/?value="+e+"&page="+t,method:"get"})}var p={getTimestamp:function(e){return new Date(e).getTime()/1e3}}},ecac:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.user?a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24}},[a("user-card",{attrs:{user:e.user}})],1),e._v(" "),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"Timeline",name:"timeline"}},[a("timeline")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Account",name:"account"}},[a("account",{attrs:{user:e.user}})],1)],1)],1)],1)],1)],1):e._e()])},n=[],s=(a("7f7f"),a("db72")),i=a("2f62"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("About me")])]),e._v(" "),a("div",{staticClass:"user-profile"},[a("div",{staticClass:"box-center"},[a("el-upload",{staticClass:"upload_img",attrs:{action:"","http-request":e.upload,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[a("pan-thumb",{attrs:{image:e.user.avatar,height:"100px",width:"100px",hoverable:!1}},[a("div",[e._v("Hello")]),e._v("\n            "+e._s(e.user.role)+"\n          ")])],1)],1),e._v(" "),a("div",{staticClass:"box-center"},[a("div",{staticClass:"user-name text-center"},[e._v(e._s(e.user.name))]),e._v(" "),a("div",{staticClass:"user-role text-center text-muted"},[e._v(e._s(e.user.role))])])]),e._v(" "),a("div",{staticClass:"user-bio"},[a("div",{staticClass:"user-education user-bio-section"},[a("div",{staticClass:"user-bio-section-header"},[a("svg-icon",{attrs:{"icon-class":"education"}}),a("span",[e._v(" 积分："+e._s(e.user.rank))])],1)])])])],1)},o=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pan-item",style:{zIndex:e.zIndex,height:e.height,width:e.width}},[a("div",{staticClass:"pan-info"},[a("div",{staticClass:"pan-info-roles-container"},[e._t("default")],2)]),e._v(" "),a("div",{staticClass:"pan-thumb",style:{backgroundImage:"url("+e.image+")"}})])},u=[],d=(a("c5f6"),{name:"PanThumb",props:{image:{type:String,required:!0},zIndex:{type:Number,default:1},width:{type:String,default:"150px"},height:{type:String,default:"150px"}}}),m=d,p=(a("4d9d"),a("2877")),f=Object(p["a"])(m,c,u,!1,null,"70365f63",null),v=f.exports,h=a("c24f"),b={components:{PanThumb:v},props:{user:{type:Object,default:function(){return{name:"",email:"",avatar:"",roles:"",rank:""}}}},data:function(){return{newFile:new FormData}},methods:{beforeAvatarUpload:function(e){if(!e)return!1;this.newFile.set("img",e)},upload:function(){var e=this;Object(h["m"])(this.newFile).then((function(t){var a=t.data;200===a.code&&"上传成功"===a.msg&&(e.$message({message:"上传成功",type:"success"}),location.reload(),e.box_show=!1),400===a.code&&e.$message({message:a.msg,type:"error"})}))}}},g=b,_=(a("6f71"),Object(p["a"])(g,l,o,!1,null,"d5498c40",null)),w=_.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[!1===e.timemodel?a("el-timeline",e._l(e.timeline,(function(t,r){return a("el-timeline-item",{key:r,attrs:{timestamp:t.create_date,placement:"top"}},[a("el-card",[a("h4",[e._v("启动 "+e._s(t.name))]),e._v(" "),t.is_check_date?a("div",[a("p",[e._v("通过时间"+e._s(t.is_check_date))]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""}})],1):e._e()])],1)})),1):!0===e.timemodel?a("el-timeline",[a("el-timeline-item",{attrs:{placement:"top"}},[a("el-card",[a("h4",[e._v("正在进行计时挑战赛")])])],1)],1):e._e(),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-size":e.page.size,layout:"total, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleQuery}})],1)],1)},k=[],x=a("3007"),P=a("905e"),j={data:function(){return{timeline:[],page:{size:20,total:0},timemodel:!1}},methods:{handleQuery:function(e){var t=this;Object(x["b"])(e).then((function(e){t.timeline=e.data.results,t.page.total=e.data.count}))},gettimelist:function(){var e=this;Object(P["a"])().then((function(t){var a=t.data.results;0===a.length||(e.timemodel=!0)}))}},created:function(){this.handleQuery(1),this.gettimelist()}},F=j,O=Object(p["a"])(F,y,k,!1,null,null,null),C=O.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.ruleForm}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name","string"===typeof t?t.trim():t)},expression:"user.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email","string"===typeof t?t.trim():t)},expression:"user.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Licence"}},[a("el-input",{staticClass:"copy-code-button",attrs:{disabled:!0},model:{value:e.user.licence,callback:function(t){e.$set(e.user,"licence","string"===typeof t?t.trim():t)},expression:"user.licence"}},[a("el-button",{staticClass:"copy-code-button",attrs:{slot:"append",icon:"el-icon-document-copy","data-clipboard-text":e.user.licence},on:{click:e.copy},slot:"append"})],1)],1),e._v(" "),!0===e.updatePwd?a("el-form-item",{attrs:{label:"旧密码"}},[a("el-input",{model:{value:e.ruleForm.oldPassword,callback:function(t){e.$set(e.ruleForm,"oldPassword","string"===typeof t?t.trim():t)},expression:"ruleForm.oldPassword"}})],1):e._e(),e._v(" "),!0===e.updatePwd?a("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[a("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass","string"===typeof t?t.trim():t)},expression:"ruleForm.pass"}})],1):e._e(),e._v(" "),!0===e.updatePwd?a("el-form-item",{attrs:{label:"确认新密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass","string"===typeof t?t.trim():t)},expression:"ruleForm.checkPass"}})],1):e._e(),e._v(" "),a("el-form-item",[!0===e.updatePwd?a("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdatePwd}},[e._v("修改")]):e._e(),e._v(" "),!1===e.updatePwd?a("el-button",{attrs:{type:"primary"},on:{click:e.handlerPwd}},[e._v("修改密码")]):e._e(),e._v(" "),!0===e.updatePwd?a("el-button",{attrs:{type:"primary"},on:{click:e.closeHandlerPwd}},[e._v("关闭")]):e._e()],1)],1)},T=[],E=a("b311"),U=a.n(E),z={data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入密码")):(e.ruleForm.pass.length<8&&r(new Error("密码不能少于8位")),""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),r())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.ruleForm.pass?r(new Error("两次输入密码不一致!")):r()};return{ruleForm:{name:"",email:"",oldPassword:"",pass:"",checkPass:""},updatePwd:!1,rules:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}]}}},props:{user:{type:Object,default:function(){return{name:"",email:""}}}},methods:{handlerPwd:function(){this.updatePwd=!0},closeHandlerPwd:function(){this.updatePwd=!1},copy:function(){var e=this,t=new U.a(".copy-code-button");t.on("success",(function(a){t.destroy(),e.$message({message:"复制成功",type:"success"})})),t.on("error",(function(a){t.destroy(),e.$message({message:"复制失败",type:"error"})}))},handleUpdatePwd:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;Object(h["l"])(e.ruleForm).then((function(t){var a=t.data;200===a.code?(e.$message({message:"修改密码成功",type:"success"}),e.updatePwd=!1):e.$message({message:a.msg,type:"error"})}))}))}}},A=z,S=Object(p["a"])(A,$,T,!1,null,null,null),I=S.exports,q={name:"Profile",components:{UserCard:w,Timeline:C,Account:I},data:function(){return{user:{},activeTab:"timeline"}},computed:Object(s["a"])({},Object(i["b"])(["name","avatar","roles","rank","email","licence"])),created:function(){this.getUser()},methods:{getUser:function(){this.user={name:this.name,email:this.email,avatar:this.avatar,rank:this.rank,licence:this.licence}}}},H=q,Q=Object(p["a"])(H,r,n,!1,null,null,null);t["default"]=Q.exports}}]);
//# sourceMappingURL=chunk-1fa92022.351c3d48.js.map