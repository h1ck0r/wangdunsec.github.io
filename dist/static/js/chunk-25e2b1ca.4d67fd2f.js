(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25e2b1ca"],{"11e9f":function(t,e,a){"use strict";a("9e0b")},"40fd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"sceneSearch",attrs:{size:"medium",placeholder:"请输入关键字进行搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",[t._v("场景商店")]),t._v(" "),t.senceStoreList.length>5?a("span",{staticStyle:{color:"#999999",float:"right"},on:{click:t.showactive}},[t._v(t._s(t.showBtnSence?"查看更多":"收起"))]):t._e()]),t._v(" "),a("div",{staticStyle:{position:"relative",overflow:"hidden"}},[a("el-drawer",{staticStyle:{position:"absolute","margin-top":"10px",color:"#303133"},attrs:{title:"场景商店",visible:t.drawer,direction:t.direction,size:"100%"},on:{"update:visible":function(e){t.drawer=e}}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},t._l(t.senceStoreList,(function(e,i){return a("el-col",{key:i,staticStyle:{"margin-top":"5px"},attrs:{span:6}},[a("el-card",{attrs:{"body-style":{padding:"2px"},shadow:"hover"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.layout_name,placement:"top"}},[a("img",{attrs:{fit:"contain",src:e.image_name,height:"260px",width:"100%"},on:{click:function(a){return t.download_website_layout(e.layout_id)}}})])],1)],1)})),1)],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-row",{staticStyle:{"margin-top":"10px"}},t._l(t.senceStoreList,(function(e,i){return i<t.sceneLength?a("el-col",{key:i,class:t.activeSceneClass===i?"current":"",staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.layout_name,placement:"top"}},[a("img",{attrs:{fit:"contain",src:e.image_name,height:"180px",width:"100%"},on:{click:function(a){return t.download_website_layout(e.layout_id)}}})])],1)],1):t._e()})),1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.imageDialogVisible},on:{"update:visible":function(e){t.imageDialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),t._v(" "),a("el-dialog",{attrs:{visible:t.ymlDialogVisible},on:{"update:visible":function(e){t.ymlDialogVisible=e}}},[a("el-input",{staticStyle:{color:"black"},attrs:{type:"textarea",autosize:"",readonly:""},model:{value:t.dialogYml,callback:function(e){t.dialogYml=e},expression:"dialogYml"}})],1),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"10px"},on:{"tab-click":t.currentTabs},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部",name:"all"}},[a("div",{staticClass:"filter-container"},[a("el-row",{attrs:{gutter:23}},[a("el-col",{staticStyle:{"padding-bottom":"18px"},attrs:{span:4}},[a("el-card",{staticStyle:{height:"328px"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("el-row",{staticStyle:{"margin-top":"40%"}},[a("el-col",{attrs:{span:8,offset:8}},[a("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"400%",position:"relative",transform:"translateX(20%)"},on:{click:t.addScene}})])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8,offset:8}},[a("span",{staticClass:"word2",staticStyle:{"font-size":"110%",position:"relative",transform:"translateX(20%)"}},[t._v("添加场景")])])],1)],1)],1),t._v(" "),t._l(t.sceneTableData,(function(e,i){return a("el-col",{key:i,staticStyle:{"padding-bottom":"18px"},attrs:{span:4}},[a("el-card",{staticStyle:{height:"328px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("div",{staticStyle:{position:"relative"}},[!1===e.is_release?a("div",{staticClass:"main",staticStyle:{position:"absolute"}},[a("span",{staticClass:"word"},[t._v("未发布")])]):t._e(),t._v(" "),e.image_name!==t.imgpath?a("img",{attrs:{src:e.image_name,alt:"",width:"100%",height:"250px"}}):e.image_name===t.imgpath?a("img",{attrs:{src:t.modelimg,alt:"",width:"100%",height:"250px"}}):t._e(),t._v(" "),!1===e.is_release&"layoutScene"===e.type?a("div",{staticStyle:{"margin-top":"-23px"}},[a("el-row",{staticStyle:{"background-color":"rgba(0,0,0,0.3)"}},[a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-zoom-in"},on:{click:function(a){return t.handleShowYml(e.id)}}},[t._v("查看")])],1),t._v(" "),a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.id)}}},[t._v("编辑")])],1),t._v(" "),a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.id)}}},[t._v("删除")])],1),t._v(" "),a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-download"},on:{click:function(a){return t.handleDownload(e.id,e.name)}}},[t._v("下载")])],1),t._v(" "),a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[""===e.status.task_id?a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-position"},on:{click:function(a){return t.handleRelease(e.id,e.is_uesful)}}},[t._v("发布")]):t._e(),t._v(" "),""!==e.status.task_id?a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-loading"},on:{click:function(a){return t.openProgress(e,1)}}},[t._v("下载中")]):t._e()],1)],1)],1):!0===e.is_release&"layoutScene"===e.type?a("div",{staticStyle:{"margin-top":"-23px"}},[a("el-row",{staticStyle:{"background-color":"rgba(0,0,0,0.3)"}},[a("el-col",{staticStyle:{position:"relative"},attrs:{span:6}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-zoom-in"},on:{click:function(a){return t.handleShowYml(e.id)}}},[t._v("查看")])],1),t._v(" "),a("el-col",{staticStyle:{position:"relative"},attrs:{span:6}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.id)}}},[t._v("编辑")])],1),t._v(" "),a("el-col",{staticStyle:{position:"relative"},attrs:{span:6}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.id)}}},[t._v("删除")])],1),t._v(" "),a("el-col",{staticStyle:{position:"relative"},attrs:{span:6}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-download"},on:{click:function(a){return t.handleDownload(e.id,e.name)}}},[t._v("下载")])],1)],1)],1):"layoutScene"!==e.type?a("div",{staticStyle:{"margin-top":"-23px"}},[a("el-row",{staticStyle:{"background-color":"rgba(0,0,0,0.3)"}},[a("el-col",{attrs:{span:12}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-delete"},on:{click:function(a){return t.delSceneTemp(e.id)}}},[t._v("删除")])],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"container-title",staticStyle:{"margin-top":"0"}},[a("span",{staticStyle:{color:"#303133","margin-left":"5px","font-size":"14px"}},[t._v(t._s(e.name))])]),t._v(" "),a("div",{staticClass:"bottom clearfix",staticStyle:{"margin-top":"10px",height:"60px"}},[a("span",{staticClass:"hoveDesc",staticStyle:{color:"#999","font-size":"14px","margin-left":"5px"}},[t._v(" "+t._s(e.desc))])])])])],1)}))],2)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"环境编排",name:"layout"}},[a("div",{staticClass:"filter-container"},[a("el-row",{attrs:{gutter:23}},t._l(t.sceneTableData,(function(e,i){return a("el-col",{key:i,staticStyle:{"padding-bottom":"18px"},attrs:{span:4}},[a("el-card",{staticStyle:{height:"328px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("div",{staticStyle:{position:"relative"}},[!1===e.is_release?a("div",{staticClass:"main",staticStyle:{position:"absolute"}},[a("span",{staticClass:"word"},[t._v("未发布")])]):t._e(),t._v(" "),e.image_name!==t.imgpath?a("img",{attrs:{src:e.image_name,alt:"",width:"100%",height:"250px"}}):e.image_name===t.imgpath?a("img",{attrs:{src:t.modelimg,alt:"",width:"100%",height:"250px"}}):t._e(),t._v(" "),!1===e.is_release&"layoutScene"===e.type?a("div",{staticStyle:{"margin-top":"-23px"}},[a("el-row",{staticStyle:{"background-color":"rgba(0,0,0,0.3)"}},[a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-zoom-in"},on:{click:function(a){return t.handleShowYml(e.id)}}},[t._v("查看")])],1),t._v(" "),a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.id)}}},[t._v("编辑")])],1),t._v(" "),a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.id)}}},[t._v("删除")])],1),t._v(" "),a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-download"},on:{click:function(a){return t.handleDownload(e.id,e.name)}}},[t._v("下载")])],1),t._v(" "),a("el-col",{staticStyle:{width:"20%"},attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[""===e.status.task_id?a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-position"},on:{click:function(a){return t.handleRelease(e.id,e.is_uesful)}}},[t._v("发布")]):t._e(),t._v(" "),""!==e.status.task_id?a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-loading"},on:{click:function(a){return t.openProgress(e,1)}}},[t._v("下载中")]):t._e()],1)],1)],1):!0===e.is_release&"layoutScene"===e.type?a("div",{staticStyle:{"margin-top":"-23px"}},[a("el-row",{staticStyle:{"background-color":"rgba(0,0,0,0.3)"}},[a("el-col",{staticStyle:{position:"relative"},attrs:{span:6}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-zoom-in"},on:{click:function(a){return t.handleShowYml(e.id)}}},[t._v("查看")])],1),t._v(" "),a("el-col",{staticStyle:{position:"relative"},attrs:{span:6}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.id)}}},[t._v("编辑")])],1),t._v(" "),a("el-col",{staticStyle:{position:"relative"},attrs:{span:6}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.id)}}},[t._v("删除")])],1),t._v(" "),a("el-col",{staticStyle:{position:"relative"},attrs:{span:6}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-download"},on:{click:function(a){return t.handleDownload(e.id,e.name)}}},[t._v("下载")])],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"container-title",staticStyle:{"margin-top":"0"}},[a("span",{staticStyle:{color:"#303133","margin-left":"5px","font-size":"14px"}},[t._v(t._s(e.name))])]),t._v(" "),a("div",{staticClass:"bottom clearfix",staticStyle:{"margin-top":"10px",height:"60px"}},[a("span",{staticClass:"hoveDesc",staticStyle:{color:"#999","font-size":"14px","margin-left":"5px"}},[t._v(" "+t._s(e.desc))])])])])],1)})),1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"计时场景",name:"time"}},[a("div",{staticClass:"filter-container"},[a("el-row",{attrs:{gutter:23}},t._l(t.sceneTableData,(function(e,i){return a("el-col",{key:i,staticStyle:{"padding-bottom":"18px"},attrs:{span:4}},[a("el-card",{staticStyle:{height:"328px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("div",{staticStyle:{position:"relative"}},[e.image_name!==t.imgpath?a("img",{attrs:{src:e.image_name,alt:"",width:"100%",height:"250px"}}):e.image_name===t.imgpath?a("img",{attrs:{src:t.modelimg,alt:"",width:"100%",height:"250px"}}):t._e(),t._v(" "),"layoutScene"!==e.type?a("div",{staticStyle:{"margin-top":"-23px"}},[a("el-row",{staticStyle:{"background-color":"rgba(0,0,0,0.3)"}},[a("el-col",{attrs:{span:12}},[a("el-link",{staticStyle:{color:"#ffffff"},attrs:{type:"info",underline:!1,icon:"el-icon-delete"},on:{click:function(a){return t.delSceneTemp(e.id)}}},[t._v("删除")])],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"container-title",staticStyle:{"margin-top":"0"}},[a("span",{staticStyle:{color:"#303133","margin-left":"5px","font-size":"14px"}},[t._v(t._s(e.name))])]),t._v(" "),a("div",{staticClass:"bottom clearfix",staticStyle:{"margin-top":"10px",height:"60px"}},[a("span",{staticClass:"hoveDesc",staticStyle:{color:"#999","font-size":"14px","margin-left":"5px"}},[t._v(" "+t._s(e.desc))])])])])],1)})),1)],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:"选择创建类型",visible:t.selectSceneDialog,width:"20%",center:""},on:{"update:visible":function(e){t.selectSceneDialog=e}}},[a("el-row",[a("el-col",{staticStyle:{position:"relative",transform:"translateX(-5%)"},attrs:{span:8,offset:8}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.handleOpenCreate}},[t._v("创建编排模式")])],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10%"}},[a("el-col",{staticStyle:{position:"relative",transform:"translateX(-5%)"},attrs:{span:8,offset:8}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.handleCreateTemp}},[t._v("创建计时模式")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.createSceneTempDialog,title:"创建计时盲盒",width:"80%",height:"100%"},on:{"update:visible":function(e){t.createSceneTempDialog=e}}},[a("v-createtemp")],1),t._v(" "),a("el-dialog",{attrs:{visible:t.progressShow,title:t.progress.title,width:"60%","before-close":t.closeProgress},on:{"update:visible":function(e){t.progressShow=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.progressLoading,expression:"progressLoading"}]},t._l(t.progress.layer,(function(e,i){return a("el-row",{staticStyle:{"margin-bottom":"10px",height:"24px"}},[a("el-tag",{staticStyle:{float:"left",width:"15%",height:"24px","line-height":"24px"},attrs:{align:"center"}},[t._v(t._s(e.id))]),t._v(" "),a("div",{staticStyle:{float:"left",width:"80%","margin-left":"10px"}},[100===e.progress?a("el-progress",{attrs:{percentage:e.progress,"text-inside":!0,"stroke-width":24,status:"success"}}):a("el-progress",{attrs:{percentage:e.progress,"text-inside":!0,"stroke-width":24}})],1)],1)})),1)]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-size":t.page.size,layout:"total, prev, pager, next, jumper",total:t.page.total},on:{"current-change":t.layoutListData}})],1)],1)])},n=[],s=(a("7f7f"),a("ac6a"),a("386d"),a("0cef")),o=a("ba92"),l=a("905e"),r=a("ea7f"),c=a("7450"),d={name:"manager",inject:["reload"],data:function(){return{tableData:[],search:"",page:{total:0,size:20},isRelease:!1,imageDialogVisible:!1,dialogImageUrl:"",ymlDialogVisible:!1,dialogYml:"",activeName:"all",imgpath:"/images/",modelimg:a("aa63"),sceneTableData:[],selectSceneDialog:!1,createSceneTempDialog:!1,showBtnSence:!0,senceStoreList:[],newLayoutFile:new FormData,taskCheckInterval:null,taskList:[],taskDict:{},progress:{title:"",layer:[],total:0,count:0,progress:0,progressInterval:null},progressShow:!1,progressLoading:!1,activeSceneClass:0,sceneLength:5,drawer:!1,direction:"ttb"}},components:{"v-createtemp":c["default"]},created:function(){this.getScene(),this.get_official_website()},methods:{layoutListData:function(t){var e=this;this.tableData=[],Object(s["i"])(this.search,t).then((function(t){var a=t.data;a.results.forEach((function(t,a){t.image_name="/images/"+t.image_name,e.tableData.push(t)})),e.page.total=a.count})).catch((function(t){e.$message({type:"error",message:"服务器内部错误!"})}))},handleQuery:function(){this.getScene(1)},handleOpenCreate:function(){this.$router.push({path:"/layout/index"})},handleDelete:function(t){var e=this;this.$confirm("确认删除？删除会影响用户得分","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=String(t);Object(s["g"])(a).then((function(t){var a=t.data;200===a.status?(e.$message({message:"删除成功",type:"success"}),e.getScene(1)):e.$message({message:a.msg,type:"error"})})).catch((function(t){e.$message({message:"服务器内部错误",type:"error"})}))})).catch()},handleShowImage:function(t){this.dialogImageUrl=t.image_name,this.imageDialogVisible=!0},handleShowYml:function(t){var e=this;if(t){var a=String(t);Object(s["i"])(a).then((function(t){var a=t.data,i="";a.results.forEach((function(t,e){i=t.yml_content})),e.dialogYml=i,e.ymlDialogVisible=!0}))}else this.$message({type:"error",message:"不存在的场景!"})},handleEdit:function(t){var e=this;if(t){var a=String(t);Object(s["i"])(a).then((function(t){var i=t.data,n={};i.results.forEach((function(t,e){n=t})),e.$router.push({path:"/layout/index",query:{layoutId:a,layoutData:n}})}))}else this.$message({type:"error",message:"不存在的场景!"})},handleRelease:function(t,e){var a=this,i=String(t);!1===e?this.$confirm("相关镜像未下载，下载后可发布，是否下载?","提示",{center:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.downloadImage(i)})).catch((function(){a.$message({type:"info",message:"已取消下载"})})):Object(s["j"])(i).then((function(t){var e=t.data,i=e.status;200===i?(a.$message({message:"发布成功",type:"success"}),a.getScene(1)):a.$message({message:e.msg,type:"error"})})).catch((function(t){a.$message({message:"服务器内部错误",type:"error"})}))},handleCreateTemp:function(){this.createSceneTempDialog=!0},delSceneTemp:function(t){var e=this,a=String(t);Object(l["h"])(a).then((function(t){var a=t.data;200===a.code?(e.$message({type:"success",message:a.message}),e.getScene(1)):e.$message({type:"error",message:a.message})}))},currentTabs:function(t,e){this.activeName=t.name,this.getScene(1,this.activeName)},getScene:function(t){var e=this;Object(o["a"])(this.search,t,this.activeName,"backstage").then((function(t){e.sceneTableData=[],200===t.data.code?(t.data.result.forEach((function(t,a){t.image_name="/images/"+t.image_name,e.sceneTableData.push(t)})),e.page.total=t.data.count):e.$message({type:"error",message:"数据返回失败!"})}))},addScene:function(){this.selectSceneDialog=!0},handleDownload:function(t,e){var a=String(t);Object(s["h"])(a).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data],{type:"application/zip"})),i=window.document.createElement("a");i.style.display="none",i.href=a,i.setAttribute("download",e+".zip"),document.body.appendChild(i),i.click()}))},checkTask:function(t){var e=this;t.forEach((function(t,a,i){var n=t["is_uesful"],s=t["status"]["task_id"];!1===n&&null!=s&&""!==s&&-1===e.taskList.indexOf(s)&&(e.taskList.push(s),e.taskDict[s]=t)}));var a=this.taskList.join(",");if(null!=a&&""!==a){var i=new FormData;i.set("task_ids",a),Object(r["c"])(i).then((function(t){var a=t.data.data;for(var i in a){var n=a[i],s=n["status"];1!==s?(e.removeArray(e.taskList,i),e.taskDict[i].is_uesful=!0,e.$notify({message:"场景下载成功",type:"success"})):e.taskDict[i].status.progress=n["progress"]}0!==e.taskLists.length&&null!==e.taskLists||(e.taskLists=[],e.taskDict={},clearInterval(e.taskCheckInterval))}))}},removeArray:function(t,e){for(var a=0;a<t.length;a++)if(t[a]===e){t.splice(a,1);break}},downloadImage:function(t){var e=this,a=new FormData;a.set("layout_image_id",t),Object(s["d"])(a).then((function(t){var a=t.data;200===a.code?(e.$message({message:a.msg,type:"success"}),e.reload()):e.$message({message:a.msg,type:"error"})})),this.getScene(1)},openProgress:function(t,e){var a=this;this.progress={title:"",layer:[],total:0,count:0,progress:0,progressInterval:null},this.progressShow=!0,this.progressLoading=!0;var i=t.status.task_id;this.progress.title=1===e?"下载相关镜像："+t.name:"分享镜像："+row.image_name,this.progress.progressInterval=window.setInterval((function(){setTimeout((function(){a.progressLoading=!1,Object(r["d"])(i).then((function(t){null!=t.data.data&&200===t.data.status&&(a.progress.count=t.data.data.progress_count,a.progress.progress=t.data.data.progress,a.progress.total=t.data.data.total,a.progress.layer=t.data.data.layer,(100===a.progress.progress||0!==a.progress.count&&0!==a.progress.total&&a.progress.count===a.progress.total)&&(clearInterval(a.progress.progressInterval),a.progressShow=!1))}))}),1.5)}),2e3)},closeProgress:function(){this.progressShow=!1,this.progressLoading=!1;try{clearInterval(this.progress.progressInterval)}catch(t){}},get_official_website:function(){var t=this;Object(s["e"])().then((function(e){t.senceStoreList=e.data.data}))},download_website_layout:function(t){var e=this,a=new FormData;if(t){var i=String(t);a.set("layout_id",i),this.$confirm("是否下载官网场景信息?","提示",{center:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(a).then((function(t){200===t.data.code?(e.$message({type:"success",message:t.data.msg}),e.reload()):e.$message({type:"error",message:t.data.msg})}))})).catch((function(){e.$message({type:"info",message:"已取消下载"})}))}else this.$message({type:"error",message:"错误的场景id"})},showactive:function(){this.drawer=!0}}},f=d,u=(a("11e9f"),a("2877")),p=Object(u["a"])(f,i,n,!1,null,"67d88fd3",null);e["default"]=p.exports},"9e0b":function(t,e,a){},aa63:function(t,e,a){t.exports=a.p+"static/img/modelbg.fcbe2049.jpg"},ba92:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return d}));var i=a("b775");function n(t){return Object(i["a"])({url:"/layout/"+t+"/get/",method:"get"})}function s(t){return Object(i["a"])({url:"/layout/"+t+"/start/",method:"get"})}function o(t){return Object(i["a"])({url:"/layout/"+t+"/stop/",method:"get"})}function l(t,e){return Object(i["a"])({url:"/layout/"+t+"/flag/?flag="+e,method:"get"})}function r(t,e){return(void 0===e||null===e||e<1)&&(e=1),Object(i["a"])({url:"/layout/"+t+"/rank/?page="+e,method:"get"})}function c(t,e,a,n){return void 0!==t&&null!=t||(t=""),void 0!==a&&null!==a||(a="all"),(void 0===e||null===e||e<1)&&(e=1),void 0!==n&&null!==n||(n=""),Object(i["a"])({url:"/get/scenedata/?tag="+a+"&page="+e+"&query="+t+"&backstage="+n,method:"get"})}function d(t){return Object(i["a"])({url:"/thumbUp",method:"post",data:{scene_id:t}})}},ea7f:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return o})),a.d(e,"c",(function(){return l}));var i=a("b775");function n(t){return Object(i["a"])({url:"/tasks/"+t+"/get/",method:"get"})}function s(t){return Object(i["a"])({url:"/tasks/batch/batch/",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/tasks/"+t+"/progress/",method:"get"})}function l(t){return Object(i["a"])({url:"/tasks/layout_batch/layout_batch/",method:"post",data:t})}}}]);
//# sourceMappingURL=chunk-25e2b1ca.4d67fd2f.js.map